(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2612)}])},2612:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return X}});var l=t(5893);t(3782);var n=t(3544),i=t(4233),a=t(7294),r=t(0),d=t(442),o=t(8735),c=t(2669),h=t(7692),u=t(1905),x=t(3047),j=t(9287),v=t(5990),p=t(8605),f=t(5478),g=t(361),b=t(1759),m=t(1864),w=t.n(m),y=t(2210),C=t.n(y),S=t(7592);class k{}function N(e){let{visible:s}=e,[t,n]=(0,a.useState)("localhost"),[i,r]=(0,a.useState)(8080),d=(0,a.useRef)(null),o=(0,a.useRef)(null);return k.host="localhost",k.port=8080,(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(h.x,{children:[(0,l.jsx)(u.f,{visible:s,zIndex:999,overlayProps:{radius:"sm",blur:2}}),(0,l.jsx)(S.o,{ref:d,onChange:()=>{n(d.current.value),k.host=d.current.value},type:"url",label:"host",value:t}),(0,l.jsx)(S.o,{onChange:()=>{let e=Number.parseInt(o.current.value);Number.isNaN(e)||(()=>{r(e),k.port=e})},ref:o,type:"number",label:"port",value:i}),(0,l.jsxs)("div",{children:[" This image will be send to ","http://".concat(t,":").concat(i,"/")]})]})})}k.host="localhost",k.port=8080;var _=t(3454);function R(){let e=(0,a.useRef)(null),[s,t]=(0,a.useState)(void 0),[n,i]=(0,a.useState)(!1),[m,y]=(0,a.useState)(void 0),[S,k]=(0,a.useState)(void 0),[R,z]=(0,a.useState)(!1),[X,E]=(0,a.useState)(void 0),[O,P]=(0,a.useState)(void 0),[F,K]=(0,a.useState)({message:"none",status:204}),[T,{open:q,close:I}]=(0,b.q)(!1);return(0,l.jsx)(r.M,{children:(0,l.jsxs)(d.K,{children:[(0,l.jsx)(d.K,{children:(0,l.jsxs)(o.X,{shadow:"xs",p:"xl",children:[(0,l.jsx)(c.T,{h:2}),(0,l.jsx)("div",{style:{width:500},children:n?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(g.fh,{openRef:e,onDrop:async e=>{var s,l;let n=e.map(e=>{let s=w().extname(e.path);if(".png"===s)return e}),i=[];n.forEach(e=>{void 0!=e&&i.push(e)}),t(i);let a=await Promise.all(i.map(async e=>{if(e){let s=Array.from(new Uint8Array(await e.arrayBuffer())),t="";for(let e=0;e<s.length;e+=1024)t+=String.fromCharCode.apply(null,s.slice(e,e+1024));let l=window.btoa(t),n=C()(l);return{name:e.name,data:"data:image/png;base64,".concat(l),width:n.width}}})),r={data:a,length:null==a?void 0:a.length,width:null!==(l=null===(s=a[0])||void 0===s?void 0:s.width)&&void 0!==l?l:16};k(r)},children:(0,l.jsxs)(o.X,{shadow:"xs",p:"xl",children:["Drag images here or click to select files",(0,l.jsx)("br",{}),"(supported only ",(0,l.jsx)("strong",{children:"png"})," files)"]})})}),(0,l.jsx)(N,{visible:n}),s&&!s.includes(void 0)?(0,l.jsx)(o.X,{shadow:"xs",p:"xl",children:(0,l.jsxs)(h.x,{h:400,children:[(0,l.jsx)(u.f,{visible:R,zIndex:1e3,overlayProps:{radius:"sm",blur:2}}),(0,l.jsx)("ul",{children:s?s.map(e=>e?(0,l.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path):(0,l.jsx)("div",{},void 0)):[]})]})}):(0,l.jsx)(l.Fragment,{})]})}),(0,l.jsxs)(x.Z,{justify:"right",mt:"md",children:[(0,l.jsx)(j.q,{value:JSON.stringify(S),children:e=>{let{copied:s,copy:t}=e;return(0,l.jsx)(v.z,{"data-disabled":n||void 0==S,color:s?"teal":"indigo",onClick:s||void 0!=S?t:void 0,children:s&&void 0!=S?"Copied data":"Copy data"})}}),(0,l.jsx)(v.z,{"data-disabled":n||void 0==s||s.includes(void 0),color:"red",onClick:()=>{t(void 0),k(void 0)},children:"Clear files"}),(0,l.jsx)(v.z,{"data-disabled":n,color:"blue",onClick:()=>{var s;return null===(s=e.current)||void 0===s?void 0:s.call(e)},children:"Select files"}),(0,l.jsx)(v.z,{color:"green","data-disabled":n||void 0==s||s.includes(void 0),onClick:!n&&s?()=>{i(!0),z(!1),(async()=>{let e=await fetch("/api/image/vertical",{method:"POST",body:JSON.stringify(S)});if(200==e.status){let s=await new Response(e.body).text(),t=JSON.parse(s);y(t),q(),P(e.status),E(t),K(t),i(!1)}})()}:void 0,children:"Generate"})]}),(0,l.jsx)(p.u,{opened:200==O&&T,onClose:I,children:(0,l.jsx)(o.X,{children:(0,l.jsx)(d.K,{children:m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.E,{children:m.data}),(0,l.jsx)(j.q,{value:m.data,children:e=>{let{copied:s,copy:t}=e;return(0,l.jsx)(v.z,{color:s?"teal":"blue",onClick:t,children:s?"Copied data":"Copy data"})}}),(0,l.jsx)(o.X,{shadow:"xs",p:"xl",children:(0,l.jsxs)(d.K,{style:{padding:10,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:5},children:[(0,l.jsx)("strong",{children:"Result:"}),(0,l.jsx)("img",{src:"data:image/png;base64,".concat(m.data),width:m.width,height:m.height,alt:""})]})})]}):(0,l.jsx)(l.Fragment,{})})})}),(0,l.jsx)(p.u,{opened:200!=O&&T,onClose:I,children:(0,l.jsx)(o.X,{children:(0,l.jsxs)(d.K,{children:[(0,l.jsx)("h1",{children:"Request URL"}),"http://".concat(_.argv[1],":").concat(_.argv[2],"/"),(0,l.jsx)("h2",{children:"Status:"}),(0,l.jsx)("br",{}),null==F?void 0:F.status,(0,l.jsxs)("h3",{children:["Message:",(0,l.jsx)("br",{})]}),(0,l.jsx)("br",{}),null==F?void 0:F.message]})})})]})})}let z=(0,n.j)({});function X(){return(0,l.jsx)(i.M,{theme:z,defaultColorScheme:"dark",children:(0,l.jsx)(R,{})})}}},function(e){e.O(0,[774,801,541,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);